<!DOCTYPE html>
<html>
  <head>
    <title>Image Detection App</title>
  </head>
  <body>
    <h1>Image Detection App</h1>
    <form>
      <label for="imageUpload">Upload an image:</label>
      <input type="file" id="imageUpload" name="imageUpload"><br><br>
      <button type="button" onclick="predictImage()">Predict</button>
    </form>
    <br>
    <img id="resultImage" src="" style="display:none;">
    <script>
      async function predictImage() {
        const image = document.getElementById("imageUpload").files[0];
        const reader = new FileReader();
        reader.readAsDataURL(image);
        reader.onloadend = async function() {
          const data = {"data": [reader.result]};
          const response = await fetch("https://danilovabg-detection-project.hf.space/run/predict", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(data),
          error: function() {
              $('#result-container').text('Произошла ошибка при отправке запроса.');
          });
          const responseJson = await response.json();
          const resultImage = document.getElementById("resultImage");
          resultImage.src = responseJson["predictions"];
          resultImage.style.display = "block";
        };
      }
    </script>
  </body>
</html>
